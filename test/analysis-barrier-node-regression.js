'use strict'

const path = require('path')
const startpoint = require('startpoint')
const inspectpoint = require('inspectpoint')
const { FakeSystemInfo, FakeAggregateNode } = require('./analysis-util')

const WrapAsBarrierNodes = require('../analysis/barrier/wrap-as-barrier-nodes.js')
const MakeExternalBarrierNodes = require('../analysis/barrier/make-external-barrier-nodes.js')
const MakeSynchronousBarrierNodes = require('../analysis/barrier/make-synchronous-barrier-nodes.js')

const CombineAsClusterNodes = require('../analysis/cluster/combine-as-cluster-nodes.js')

function createTreeStructure () {
  const data = [
    new FakeAggregateNode({
      aggregateId: 1,
      parentAggregateId: 0,
      children: [ 2, 3, 4 ],
      isRoot: true,
      frames: []
    }),

    new FakeAggregateNode({
      aggregateId: 3,
      parentAggregateId: 1,
      children: [ 5, 6 ],
      mark: [ 'user', 'net', 'server' ],
      type: 'PIPESERVERWRAP',
      frames:
       [ { functionName: 'createServerHandle',
           isToplevel: true,
           fileName: 'net.js',
           lineNumber: 1319,
           columnNumber: 14 },
         { functionName: 'setupListenHandle',
           typeName: 'Server',
           fileName: 'net.js',
           lineNumber: 1383,
           columnNumber: 14 },
         { functionName: 'listenInCluster',
           isToplevel: true,
           fileName: 'net.js',
           lineNumber: 1444,
           columnNumber: 12 },
         { functionName: 'Server.listen',
           typeName: 'Server',
           fileName: 'net.js',
           lineNumber: 1543,
           columnNumber: 5 },
         { functionName: 'listen',
           typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 289,
           columnNumber: 31 },
         { typeName: 'Object',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 64,
           columnNumber: 8 },
         { functionName: 'Module._compile',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 666,
           columnNumber: 30 },
         { functionName: 'Module._extensions..js',
           typeName: 'Object',
           fileName: 'module.js',
           lineNumber: 677,
           columnNumber: 10 },
         { functionName: 'Module.load',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 578,
           columnNumber: 32 },
         { functionName: 'tryModuleLoad',
           isToplevel: true,
           fileName: 'module.js',
           lineNumber: 518,
           columnNumber: 12 },
         { functionName: 'Module._load',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 510,
           columnNumber: 3 },
         { functionName: 'Module.runMain',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 707,
           columnNumber: 10 },
         { functionName: 'startup',
           isToplevel: true,
           fileName: 'bootstrap_node.js',
           lineNumber: 191,
           columnNumber: 16 },
         { isToplevel: true,
           fileName: 'bootstrap_node.js',
           lineNumber: 683,
           columnNumber: 3 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 5,
      parentAggregateId: 3,
      children: [],
      mark: [ 'user', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'internalNextTick',
           isToplevel: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 171,
           columnNumber: 24 },
         { functionName: 'setupListenHandle',
           typeName: 'Server',
           fileName: 'net.js',
           lineNumber: 1417,
           columnNumber: 3 },
         { functionName: 'listenInCluster',
           isToplevel: true,
           fileName: 'net.js',
           lineNumber: 1444,
           columnNumber: 12 },
         { functionName: 'Server.listen',
           typeName: 'Server',
           fileName: 'net.js',
           lineNumber: 1543,
           columnNumber: 5 },
         { functionName: 'listen',
           typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 289,
           columnNumber: 31 },
         { typeName: 'Object',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 64,
           columnNumber: 8 },
         { functionName: 'Module._compile',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 666,
           columnNumber: 30 },
         { functionName: 'Module._extensions..js',
           typeName: 'Object',
           fileName: 'module.js',
           lineNumber: 677,
           columnNumber: 10 },
         { functionName: 'Module.load',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 578,
           columnNumber: 32 },
         { functionName: 'tryModuleLoad',
           isToplevel: true,
           fileName: 'module.js',
           lineNumber: 518,
           columnNumber: 12 },
         { functionName: 'Module._load',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 510,
           columnNumber: 3 },
         { functionName: 'Module.runMain',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 707,
           columnNumber: 10 },
         { functionName: 'startup',
           isToplevel: true,
           fileName: 'bootstrap_node.js',
           lineNumber: 191,
           columnNumber: 16 },
         { isToplevel: true,
           fileName: 'bootstrap_node.js',
           lineNumber: 683,
           columnNumber: 3 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 2,
      parentAggregateId: 1,
      children: [],
      mark: [ 'user', null, null ],
      type: 'RANDOMBYTESREQUEST',
      frames:
       [ { functionName: 'randomBytes',
           typeName: 'Object',
           fileName: 'internal/crypto/random.js',
           lineNumber: 45,
           columnNumber: 10 },
         { functionName: 'nodeRNG',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/uuid/lib/rng.js',
           lineNumber: 7,
           columnNumber: 17 },
         { functionName: 'v4',
           typeName: 'Function',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/uuid/v4.js',
           lineNumber: 13,
           columnNumber: 52 },
         { typeName: 'Object',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/bunyan_helper.js',
           lineNumber: 16,
           columnNumber: 27 },
         { functionName: 'Module._compile',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 666,
           columnNumber: 30 },
         { functionName: 'Module._extensions..js',
           typeName: 'Object',
           fileName: 'module.js',
           lineNumber: 677,
           columnNumber: 10 },
         { functionName: 'Module.load',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 578,
           columnNumber: 32 },
         { functionName: 'tryModuleLoad',
           isToplevel: true,
           fileName: 'module.js',
           lineNumber: 518,
           columnNumber: 12 },
         { functionName: 'Module._load',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 510,
           columnNumber: 3 },
         { functionName: 'Module.require',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 614,
           columnNumber: 17 },
         { functionName: 'require',
           isToplevel: true,
           fileName: 'internal/module.js',
           lineNumber: 13,
           columnNumber: 18 },
         { typeName: 'Object',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/index.js',
           lineNumber: 8,
           columnNumber: 14 },
         { functionName: 'Module._compile',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 666,
           columnNumber: 30 },
         { functionName: 'Module._extensions..js',
           typeName: 'Object',
           fileName: 'module.js',
           lineNumber: 677,
           columnNumber: 10 },
         { functionName: 'Module.load',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 578,
           columnNumber: 32 },
         { functionName: 'tryModuleLoad',
           isToplevel: true,
           fileName: 'module.js',
           lineNumber: 518,
           columnNumber: 12 },
         { functionName: 'Module._load',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 510,
           columnNumber: 3 },
         { functionName: 'Module.require',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 614,
           columnNumber: 17 },
         { functionName: 'require',
           isToplevel: true,
           fileName: 'internal/module.js',
           lineNumber: 13,
           columnNumber: 18 },
         { typeName: 'Object',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 5,
           columnNumber: 17 },
         { functionName: 'Module._compile',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 666,
           columnNumber: 30 },
         { functionName: 'Module._extensions..js',
           typeName: 'Object',
           fileName: 'module.js',
           lineNumber: 677,
           columnNumber: 10 },
         { functionName: 'Module.load',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 578,
           columnNumber: 32 },
         { functionName: 'tryModuleLoad',
           isToplevel: true,
           fileName: 'module.js',
           lineNumber: 518,
           columnNumber: 12 },
         { functionName: 'Module._load',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 510,
           columnNumber: 3 },
         { functionName: 'Module.runMain',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 707,
           columnNumber: 10 },
         { functionName: 'startup',
           isToplevel: true,
           fileName: 'bootstrap_node.js',
           lineNumber: 191,
           columnNumber: 16 },
         { isToplevel: true,
           fileName: 'bootstrap_node.js',
           lineNumber: 683,
           columnNumber: 3 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 4,
      parentAggregateId: 1,
      children: [],
      mark: [ 'user', null, null ],
      type: 'PROMISE',
      frames:
       [ { functionName: 'resolve', typeName: 'Function' },
         { functionName: 'runInContext',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/lodash/lodash.js',
           lineNumber: 6088,
           columnNumber: 36 },
         { typeName: 'Object',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/lodash/lodash.js',
           lineNumber: 17057,
           columnNumber: 11 },
         { typeName: 'Object',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/lodash/lodash.js',
           lineNumber: 17084,
           columnNumber: 3 },
         { functionName: 'Module._compile',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 666,
           columnNumber: 30 },
         { functionName: 'Module._extensions..js',
           typeName: 'Object',
           fileName: 'module.js',
           lineNumber: 677,
           columnNumber: 10 },
         { functionName: 'Module.load',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 578,
           columnNumber: 32 },
         { functionName: 'tryModuleLoad',
           isToplevel: true,
           fileName: 'module.js',
           lineNumber: 518,
           columnNumber: 12 },
         { functionName: 'Module._load',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 510,
           columnNumber: 3 },
         { functionName: 'Module.require',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 614,
           columnNumber: 17 },
         { functionName: 'require',
           isToplevel: true,
           fileName: 'internal/module.js',
           lineNumber: 13,
           columnNumber: 18 },
         { typeName: 'Object',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify-errors/lib/index.js',
           lineNumber: 5,
           columnNumber: 18 },
         { functionName: 'Module._compile',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 666,
           columnNumber: 30 },
         { functionName: 'Module._extensions..js',
           typeName: 'Object',
           fileName: 'module.js',
           lineNumber: 677,
           columnNumber: 10 },
         { functionName: 'Module.load',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 578,
           columnNumber: 32 },
         { functionName: 'tryModuleLoad',
           isToplevel: true,
           fileName: 'module.js',
           lineNumber: 518,
           columnNumber: 12 },
         { functionName: 'Module._load',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 510,
           columnNumber: 3 },
         { functionName: 'Module.require',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 614,
           columnNumber: 17 },
         { functionName: 'require',
           isToplevel: true,
           fileName: 'internal/module.js',
           lineNumber: 13,
           columnNumber: 18 },
         { typeName: 'Object',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/index.js',
           lineNumber: 6,
           columnNumber: 14 },
         { functionName: 'Module._compile',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 666,
           columnNumber: 30 },
         { functionName: 'Module._extensions..js',
           typeName: 'Object',
           fileName: 'module.js',
           lineNumber: 677,
           columnNumber: 10 },
         { functionName: 'Module.load',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 578,
           columnNumber: 32 },
         { functionName: 'tryModuleLoad',
           isToplevel: true,
           fileName: 'module.js',
           lineNumber: 518,
           columnNumber: 12 },
         { functionName: 'Module._load',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 510,
           columnNumber: 3 },
         { functionName: 'Module.require',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 614,
           columnNumber: 17 },
         { functionName: 'require',
           isToplevel: true,
           fileName: 'internal/module.js',
           lineNumber: 13,
           columnNumber: 18 },
         { typeName: 'Object',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 5,
           columnNumber: 17 },
         { functionName: 'Module._compile',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 666,
           columnNumber: 30 },
         { functionName: 'Module._extensions..js',
           typeName: 'Object',
           fileName: 'module.js',
           lineNumber: 677,
           columnNumber: 10 },
         { functionName: 'Module.load',
           typeName: 'Module',
           fileName: 'module.js',
           lineNumber: 578,
           columnNumber: 32 },
         { functionName: 'tryModuleLoad',
           isToplevel: true,
           fileName: 'module.js',
           lineNumber: 518,
           columnNumber: 12 },
         { functionName: 'Module._load',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 510,
           columnNumber: 3 },
         { functionName: 'Module.runMain',
           typeName: 'Function',
           fileName: 'module.js',
           lineNumber: 707,
           columnNumber: 10 },
         { functionName: 'startup',
           isToplevel: true,
           fileName: 'bootstrap_node.js',
           lineNumber: 191,
           columnNumber: 16 },
         { isToplevel: true,
           fileName: 'bootstrap_node.js',
           lineNumber: 683,
           columnNumber: 3 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 6,
      parentAggregateId: 3,
      children: [ 7, 8, 9 ],
      mark: [ 'nodecore', 'net', 'onconnection' ],
      type: 'PIPEWRAP',
      frames: []
    }),

    new FakeAggregateNode({
      aggregateId: 7,
      parentAggregateId: 6,
      children: [],
      mark: [ 'nodecore', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'resume',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 819,
           columnNumber: 13 },
         { functionName: 'Readable.resume',
           typeName: 'Socket',
           fileName: '_stream_readable.js',
           lineNumber: 811,
           columnNumber: 5 },
         { functionName: 'Readable.on',
           typeName: 'Socket',
           fileName: '_stream_readable.js',
           lineNumber: 781,
           columnNumber: 12 },
         { functionName: 'connectionListenerInternal',
           isToplevel: true,
           fileName: '_http_server.js',
           lineNumber: 353,
           columnNumber: 10 },
         { functionName: 'connectionListener',
           typeName: 'Server',
           fileName: '_http_server.js',
           lineNumber: 299,
           columnNumber: 3 },
         { functionName: 'emit',
           typeName: 'Server',
           fileName: 'events.js',
           lineNumber: 136,
           columnNumber: 15 },
         { functionName: 'emit',
           typeName: 'Server',
           fileName: 'domain.js',
           lineNumber: 421,
           columnNumber: 20 },
         { functionName: 'onconnection',
           typeName: 'Pipe',
           fileName: 'net.js',
           lineNumber: 1619,
           columnNumber: 8 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 8,
      parentAggregateId: 6,
      children: [],
      mark: [ 'nodecore', null, null ],
      type: 'Timeout',
      frames:
       [ { functionName: 'Timeout',
           isConstructor: true,
           fileName: 'internal/timers.js',
           lineNumber: 76,
           columnNumber: 5 },
         { functionName: 'setUnrefTimeout',
           isToplevel: true,
           fileName: 'internal/timers.js',
           lineNumber: 124,
           columnNumber: 17 },
         { functionName: 'Socket.setTimeout',
           typeName: 'Socket',
           fileName: 'net.js',
           lineNumber: 422,
           columnNumber: 22 },
         { functionName: 'connectionListenerInternal',
           isToplevel: true,
           fileName: '_http_server.js',
           lineNumber: 318,
           columnNumber: 12 },
         { functionName: 'connectionListener',
           typeName: 'Server',
           fileName: '_http_server.js',
           lineNumber: 299,
           columnNumber: 3 },
         { functionName: 'emit',
           typeName: 'Server',
           fileName: 'events.js',
           lineNumber: 136,
           columnNumber: 15 },
         { functionName: 'emit',
           typeName: 'Server',
           fileName: 'domain.js',
           lineNumber: 421,
           columnNumber: 20 },
         { functionName: 'onconnection',
           typeName: 'Pipe',
           fileName: 'net.js',
           lineNumber: 1619,
           columnNumber: 8 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 9,
      parentAggregateId: 6,
      children: [ 10, 11 ],
      mark: [ 'nodecore', 'net', 'onrequest' ],
      type: 'HTTPPARSER',
      frames:
       [ { functionName: 'connectionListenerInternal',
           isToplevel: true,
           fileName: '_http_server.js',
           lineNumber: 322,
           columnNumber: 10 },
         { functionName: 'connectionListener',
           typeName: 'Server',
           fileName: '_http_server.js',
           lineNumber: 299,
           columnNumber: 3 },
         { functionName: 'emit',
           typeName: 'Server',
           fileName: 'events.js',
           lineNumber: 136,
           columnNumber: 15 },
         { functionName: 'emit',
           typeName: 'Server',
           fileName: 'domain.js',
           lineNumber: 421,
           columnNumber: 20 },
         { functionName: 'onconnection',
           typeName: 'Pipe',
           fileName: 'net.js',
           lineNumber: 1619,
           columnNumber: 8 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 10,
      parentAggregateId: 9,
      children: [ 12 ],
      mark: [ 'user', null, null ],
      type: 'Immediate',
      frames:
       [ { functionName: 'Immediate',
           isConstructor: true,
           fileName: 'timers.js',
           lineNumber: 749,
           columnNumber: 7 },
         { functionName: 'setImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 805,
           columnNumber: 10 },
         { functionName: 'createLargeLinkStructure',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 9,
           columnNumber: 3 },
         { functionName: 'getLargeData',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 23,
           columnNumber: 3 },
         { functionName: 'processRequest',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 39,
           columnNumber: 3 },
         { typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 53,
           columnNumber: 3 },
         { functionName: 'next',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 1125,
           columnNumber: 29 },
         { functionName: 'f',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/once/once.js',
           lineNumber: 36,
           columnNumber: 25 },
         { functionName: '_run',
           typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 1179,
           columnNumber: 16 },
         { functionName: '_route',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 825,
           columnNumber: 14 },
         { functionName: 'onRoute',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 939,
           columnNumber: 24 },
         { functionName: 'find',
           typeName: 'Router',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/router.js',
           lineNumber: 436,
           columnNumber: 9 },
         { functionName: '_route',
           typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 922,
           columnNumber: 28 },
         { functionName: '_routeAndRun',
           typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 816,
           columnNumber: 10 },
         { functionName: '_handle',
           typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 863,
           columnNumber: 14 },
         { functionName: 'onRequest',
           typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 214,
           columnNumber: 14 },
         { functionName: 'emit',
           typeName: 'Server',
           fileName: 'events.js',
           lineNumber: 131,
           columnNumber: 13 },
         { functionName: 'emit',
           typeName: 'Server',
           fileName: 'domain.js',
           lineNumber: 421,
           columnNumber: 20 },
         { functionName: 'parserOnIncoming',
           isToplevel: true,
           fileName: '_http_server.js',
           lineNumber: 628,
           columnNumber: 12 },
         { functionName: 'parserOnHeadersComplete',
           typeName: 'HTTPParser',
           fileName: '_http_common.js',
           lineNumber: 112,
           columnNumber: 17 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 11,
      parentAggregateId: 9,
      children: [ 13 ],
      mark: [ 'user', null, null ],
      type: 'Immediate',
      frames:
       [ { functionName: 'Immediate',
           isConstructor: true,
           fileName: 'timers.js',
           lineNumber: 749,
           columnNumber: 7 },
         { functionName: 'setImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 805,
           columnNumber: 10 },
         { functionName: 'createLargeLinkStructure',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 9,
           columnNumber: 3 },
         { functionName: 'getLargeData',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 23,
           columnNumber: 3 },
         { functionName: 'processRequest',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 39,
           columnNumber: 3 },
         { typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 53,
           columnNumber: 3 },
         { functionName: 'next',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 1125,
           columnNumber: 29 },
         { functionName: 'f',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/once/once.js',
           lineNumber: 36,
           columnNumber: 25 },
         { functionName: '_run',
           typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 1179,
           columnNumber: 16 },
         { functionName: '_route',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 825,
           columnNumber: 14 },
         { functionName: 'onRoute',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 939,
           columnNumber: 24 },
         { functionName: 'find',
           typeName: 'Router',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/router.js',
           lineNumber: 551,
           columnNumber: 9 },
         { functionName: '_route',
           typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 922,
           columnNumber: 28 },
         { functionName: '_routeAndRun',
           typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 816,
           columnNumber: 10 },
         { functionName: '_handle',
           typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 863,
           columnNumber: 14 },
         { functionName: 'onRequest',
           typeName: 'Server',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/server.js',
           lineNumber: 214,
           columnNumber: 14 },
         { functionName: 'emit',
           typeName: 'Server',
           fileName: 'events.js',
           lineNumber: 131,
           columnNumber: 13 },
         { functionName: 'emit',
           typeName: 'Server',
           fileName: 'domain.js',
           lineNumber: 421,
           columnNumber: 20 },
         { functionName: 'parserOnIncoming',
           isToplevel: true,
           fileName: '_http_server.js',
           lineNumber: 628,
           columnNumber: 12 },
         { functionName: 'parserOnHeadersComplete',
           typeName: 'HTTPParser',
           fileName: '_http_common.js',
           lineNumber: 112,
           columnNumber: 17 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 12,
      parentAggregateId: 10,
      children: [ 14 ],
      mark: [ 'user', null, null ],
      type: 'Immediate',
      frames:
       [ { functionName: 'Immediate',
           isConstructor: true,
           fileName: 'timers.js',
           lineNumber: 749,
           columnNumber: 7 },
         { functionName: 'setImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 805,
           columnNumber: 10 },
         { functionName: 'createLargeLinkStructure',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 9,
           columnNumber: 3 },
         { typeName: 'Immediate',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 13,
           columnNumber: 7 },
         { functionName: 'runCallback',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 729,
           columnNumber: 18 },
         { functionName: 'tryOnImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 700,
           columnNumber: 5 },
         { functionName: 'processImmediate',
           typeName: 'process',
           fileName: 'timers.js',
           lineNumber: 682,
           columnNumber: 5 },
         { functionName: 'topLevelDomainCallback',
           typeName: 'process',
           fileName: 'domain.js',
           lineNumber: 101,
           columnNumber: 23 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 13,
      parentAggregateId: 11,
      children: [ 15 ],
      mark: [ 'user', null, null ],
      type: 'Immediate',
      frames:
       [ { functionName: 'Immediate',
           isConstructor: true,
           fileName: 'timers.js',
           lineNumber: 749,
           columnNumber: 7 },
         { functionName: 'setImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 805,
           columnNumber: 10 },
         { functionName: 'createLargeLinkStructure',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 9,
           columnNumber: 3 },
         { typeName: 'Immediate',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 13,
           columnNumber: 7 },
         { functionName: 'runCallback',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 729,
           columnNumber: 18 },
         { functionName: 'tryOnImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 700,
           columnNumber: 5 },
         { functionName: 'processImmediate',
           typeName: 'process',
           fileName: 'timers.js',
           lineNumber: 682,
           columnNumber: 5 },
         { functionName: 'topLevelDomainCallback',
           typeName: 'process',
           fileName: 'domain.js',
           lineNumber: 101,
           columnNumber: 23 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 14,
      parentAggregateId: 12,
      children: [ 16 ],
      mark: [ 'user', null, null ],
      type: 'Immediate',
      frames:
       [ { functionName: 'Immediate',
           isConstructor: true,
           fileName: 'timers.js',
           lineNumber: 749,
           columnNumber: 7 },
         { functionName: 'setImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 805,
           columnNumber: 10 },
         { functionName: 'createLargeLinkStructure',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 9,
           columnNumber: 3 },
         { typeName: 'Immediate',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 13,
           columnNumber: 7 },
         { functionName: 'runCallback',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 729,
           columnNumber: 18 },
         { functionName: 'tryOnImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 700,
           columnNumber: 5 },
         { functionName: 'processImmediate',
           typeName: 'process',
           fileName: 'timers.js',
           lineNumber: 682,
           columnNumber: 5 },
         { functionName: 'topLevelDomainCallback',
           typeName: 'process',
           fileName: 'domain.js',
           lineNumber: 101,
           columnNumber: 23 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 15,
      parentAggregateId: 13,
      children: [ 17 ],
      mark: [ 'user', null, null ],
      type: 'Immediate',
      frames:
       [ { functionName: 'Immediate',
           isConstructor: true,
           fileName: 'timers.js',
           lineNumber: 749,
           columnNumber: 7 },
         { functionName: 'setImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 805,
           columnNumber: 10 },
         { functionName: 'createLargeLinkStructure',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 9,
           columnNumber: 3 },
         { typeName: 'Immediate',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 13,
           columnNumber: 7 },
         { functionName: 'runCallback',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 729,
           columnNumber: 18 },
         { functionName: 'tryOnImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 700,
           columnNumber: 5 },
         { functionName: 'processImmediate',
           typeName: 'process',
           fileName: 'timers.js',
           lineNumber: 682,
           columnNumber: 5 },
         { functionName: 'topLevelDomainCallback',
           typeName: 'process',
           fileName: 'domain.js',
           lineNumber: 101,
           columnNumber: 23 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 16,
      parentAggregateId: 14,
      children: [ 18 ],
      mark: [ 'user', null, null ],
      type: 'Immediate',
      frames:
       [ { functionName: 'Immediate',
           isConstructor: true,
           fileName: 'timers.js',
           lineNumber: 749,
           columnNumber: 7 },
         { functionName: 'setImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 805,
           columnNumber: 10 },
         { functionName: 'createLargeLinkStructure',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 9,
           columnNumber: 3 },
         { typeName: 'Immediate',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 13,
           columnNumber: 7 },
         { functionName: 'runCallback',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 729,
           columnNumber: 18 },
         { functionName: 'tryOnImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 700,
           columnNumber: 5 },
         { functionName: 'processImmediate',
           typeName: 'process',
           fileName: 'timers.js',
           lineNumber: 682,
           columnNumber: 5 },
         { functionName: 'topLevelDomainCallback',
           typeName: 'process',
           fileName: 'domain.js',
           lineNumber: 101,
           columnNumber: 23 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 17,
      parentAggregateId: 15,
      children: [ 19 ],
      mark: [ 'user', null, null ],
      type: 'Immediate',
      frames:
       [ { functionName: 'Immediate',
           isConstructor: true,
           fileName: 'timers.js',
           lineNumber: 749,
           columnNumber: 7 },
         { functionName: 'setImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 805,
           columnNumber: 10 },
         { functionName: 'createLargeLinkStructure',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 9,
           columnNumber: 3 },
         { typeName: 'Immediate',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 13,
           columnNumber: 7 },
         { functionName: 'runCallback',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 729,
           columnNumber: 18 },
         { functionName: 'tryOnImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 700,
           columnNumber: 5 },
         { functionName: 'processImmediate',
           typeName: 'process',
           fileName: 'timers.js',
           lineNumber: 682,
           columnNumber: 5 },
         { functionName: 'topLevelDomainCallback',
           typeName: 'process',
           fileName: 'domain.js',
           lineNumber: 101,
           columnNumber: 23 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 18,
      parentAggregateId: 16,
      children: [ 20 ],
      mark: [ 'user', null, null ],
      type: 'Immediate',
      frames:
       [ { functionName: 'Immediate',
           isConstructor: true,
           fileName: 'timers.js',
           lineNumber: 749,
           columnNumber: 7 },
         { functionName: 'setImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 805,
           columnNumber: 10 },
         { functionName: 'createLargeLinkStructure',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 9,
           columnNumber: 3 },
         { typeName: 'Immediate',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 13,
           columnNumber: 7 },
         { functionName: 'runCallback',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 729,
           columnNumber: 18 },
         { functionName: 'tryOnImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 700,
           columnNumber: 5 },
         { functionName: 'processImmediate',
           typeName: 'process',
           fileName: 'timers.js',
           lineNumber: 682,
           columnNumber: 5 },
         { functionName: 'topLevelDomainCallback',
           typeName: 'process',
           fileName: 'domain.js',
           lineNumber: 101,
           columnNumber: 23 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 19,
      parentAggregateId: 17,
      children: [ 21 ],
      mark: [ 'user', null, null ],
      type: 'Immediate',
      frames:
       [ { functionName: 'Immediate',
           isConstructor: true,
           fileName: 'timers.js',
           lineNumber: 749,
           columnNumber: 7 },
         { functionName: 'setImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 805,
           columnNumber: 10 },
         { functionName: 'createLargeLinkStructure',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 9,
           columnNumber: 3 },
         { typeName: 'Immediate',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 13,
           columnNumber: 7 },
         { functionName: 'runCallback',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 729,
           columnNumber: 18 },
         { functionName: 'tryOnImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 700,
           columnNumber: 5 },
         { functionName: 'processImmediate',
           typeName: 'process',
           fileName: 'timers.js',
           lineNumber: 682,
           columnNumber: 5 },
         { functionName: 'topLevelDomainCallback',
           typeName: 'process',
           fileName: 'domain.js',
           lineNumber: 101,
           columnNumber: 23 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 20,
      parentAggregateId: 18,
      children: [ 22, 23 ],
      mark: [ 'user', null, null ],
      type: 'Timeout',
      frames:
       [ { functionName: 'Timeout',
           isConstructor: true,
           fileName: 'internal/timers.js',
           lineNumber: 76,
           columnNumber: 5 },
         { functionName: 'setTimeout',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 435,
           columnNumber: 19 },
         { functionName: 'getVersion',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 33,
           columnNumber: 3 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 42,
           columnNumber: 5 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 28,
           columnNumber: 5 },
         { typeName: 'Immediate',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 15,
           columnNumber: 7 },
         { functionName: 'runCallback',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 729,
           columnNumber: 18 },
         { functionName: 'tryOnImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 700,
           columnNumber: 5 },
         { functionName: 'processImmediate',
           typeName: 'process',
           fileName: 'timers.js',
           lineNumber: 682,
           columnNumber: 5 },
         { functionName: 'topLevelDomainCallback',
           typeName: 'process',
           fileName: 'domain.js',
           lineNumber: 101,
           columnNumber: 23 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 21,
      parentAggregateId: 19,
      children: [ 24, 25, 26 ],
      mark: [ 'user', null, null ],
      type: 'Timeout',
      frames:
       [ { functionName: 'Timeout',
           isConstructor: true,
           fileName: 'internal/timers.js',
           lineNumber: 76,
           columnNumber: 5 },
         { functionName: 'setTimeout',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 435,
           columnNumber: 19 },
         { functionName: 'getVersion',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 33,
           columnNumber: 3 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 42,
           columnNumber: 5 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 28,
           columnNumber: 5 },
         { typeName: 'Immediate',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 15,
           columnNumber: 7 },
         { functionName: 'runCallback',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 729,
           columnNumber: 18 },
         { functionName: 'tryOnImmediate',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 700,
           columnNumber: 5 },
         { functionName: 'processImmediate',
           typeName: 'process',
           fileName: 'timers.js',
           lineNumber: 682,
           columnNumber: 5 },
         { functionName: 'topLevelDomainCallback',
           typeName: 'process',
           fileName: 'domain.js',
           lineNumber: 101,
           columnNumber: 23 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 22,
      parentAggregateId: 20,
      children: [ 27 ],
      mark: [ 'user', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'internalNextTick',
           isToplevel: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 171,
           columnNumber: 24 },
         { functionName: '_writeRaw',
           typeName: 'ServerResponse',
           fileName: '_http_outgoing.js',
           lineNumber: 273,
           columnNumber: 9 },
         { functionName: '_send',
           typeName: 'ServerResponse',
           fileName: '_http_outgoing.js',
           lineNumber: 241,
           columnNumber: 15 },
         { functionName: 'end',
           typeName: 'ServerResponse',
           fileName: '_http_outgoing.js',
           lineNumber: 774,
           columnNumber: 16 },
         { functionName: 'flush',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 836,
           columnNumber: 9 },
         { functionName: '__send',
           typeName: 'ServerResponse',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 500,
           columnNumber: 16 },
         { functionName: 'send',
           typeName: 'ServerResponse',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 303,
           columnNumber: 28 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 55,
           columnNumber: 9 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 45,
           columnNumber: 7 },
         { typeName: 'Timeout',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 34,
           columnNumber: 5 },
         { functionName: 'ontimeout',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 458,
           columnNumber: 11 },
         { functionName: 'tryOnTimeout',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 307,
           columnNumber: 5 },
         { functionName: 'listOnTimeout',
           typeName: 'Timer',
           fileName: 'timers.js',
           lineNumber: 270,
           columnNumber: 5 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 23,
      parentAggregateId: 20,
      children: [ 28 ],
      mark: [ 'user', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'write_',
           isToplevel: true,
           fileName: '_http_outgoing.js',
           lineNumber: 657,
           columnNumber: 13 },
         { functionName: 'write',
           typeName: 'ServerResponse',
           fileName: '_http_outgoing.js',
           lineNumber: 620,
           columnNumber: 10 },
         { functionName: 'flush',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 832,
           columnNumber: 13 },
         { functionName: '__send',
           typeName: 'ServerResponse',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 500,
           columnNumber: 16 },
         { functionName: 'send',
           typeName: 'ServerResponse',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 303,
           columnNumber: 28 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 55,
           columnNumber: 9 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 45,
           columnNumber: 7 },
         { typeName: 'Timeout',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 34,
           columnNumber: 5 },
         { functionName: 'ontimeout',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 458,
           columnNumber: 11 },
         { functionName: 'tryOnTimeout',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 307,
           columnNumber: 5 },
         { functionName: 'listOnTimeout',
           typeName: 'Timer',
           fileName: 'timers.js',
           lineNumber: 270,
           columnNumber: 5 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 24,
      parentAggregateId: 21,
      children: [ 29 ],
      mark: [ 'user', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'internalNextTick',
           isToplevel: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 171,
           columnNumber: 24 },
         { functionName: '_writeRaw',
           typeName: 'ServerResponse',
           fileName: '_http_outgoing.js',
           lineNumber: 273,
           columnNumber: 9 },
         { functionName: '_send',
           typeName: 'ServerResponse',
           fileName: '_http_outgoing.js',
           lineNumber: 241,
           columnNumber: 15 },
         { functionName: 'end',
           typeName: 'ServerResponse',
           fileName: '_http_outgoing.js',
           lineNumber: 774,
           columnNumber: 16 },
         { functionName: 'flush',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 836,
           columnNumber: 9 },
         { functionName: '__send',
           typeName: 'ServerResponse',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 500,
           columnNumber: 16 },
         { functionName: 'send',
           typeName: 'ServerResponse',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 303,
           columnNumber: 28 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 55,
           columnNumber: 9 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 45,
           columnNumber: 7 },
         { typeName: 'Timeout',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 34,
           columnNumber: 5 },
         { functionName: 'ontimeout',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 458,
           columnNumber: 11 },
         { functionName: 'tryOnTimeout',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 307,
           columnNumber: 5 },
         { functionName: 'listOnTimeout',
           typeName: 'Timer',
           fileName: 'timers.js',
           lineNumber: 270,
           columnNumber: 5 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 25,
      parentAggregateId: 21,
      children: [ 30 ],
      mark: [ 'user', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'write_',
           isToplevel: true,
           fileName: '_http_outgoing.js',
           lineNumber: 657,
           columnNumber: 13 },
         { functionName: 'write',
           typeName: 'ServerResponse',
           fileName: '_http_outgoing.js',
           lineNumber: 620,
           columnNumber: 10 },
         { functionName: 'flush',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 832,
           columnNumber: 13 },
         { functionName: '__send',
           typeName: 'ServerResponse',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 500,
           columnNumber: 16 },
         { functionName: 'send',
           typeName: 'ServerResponse',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 303,
           columnNumber: 28 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 55,
           columnNumber: 9 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 45,
           columnNumber: 7 },
         { typeName: 'Timeout',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 34,
           columnNumber: 5 },
         { functionName: 'ontimeout',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 458,
           columnNumber: 11 },
         { functionName: 'tryOnTimeout',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 307,
           columnNumber: 5 },
         { functionName: 'listOnTimeout',
           typeName: 'Timer',
           fileName: 'timers.js',
           lineNumber: 270,
           columnNumber: 5 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 26,
      parentAggregateId: 21,
      children: [],
      mark: [ 'user', null, null ],
      type: 'Timeout',
      frames:
       [ { functionName: 'Timeout',
           isConstructor: true,
           fileName: 'internal/timers.js',
           lineNumber: 76,
           columnNumber: 5 },
         { functionName: 'setUnrefTimeout',
           isToplevel: true,
           fileName: 'internal/timers.js',
           lineNumber: 124,
           columnNumber: 17 },
         { functionName: 'utcDate',
           isToplevel: true,
           fileName: 'internal/http.js',
           lineNumber: 11,
           columnNumber: 5 },
         { functionName: '_storeHeader',
           typeName: 'ServerResponse',
           fileName: '_http_outgoing.js',
           lineNumber: 364,
           columnNumber: 32 },
         { functionName: 'writeHead',
           typeName: 'ServerResponse',
           fileName: '_http_server.js',
           lineNumber: 260,
           columnNumber: 8 },
         { functionName: 'restifyWriteHead',
           typeName: 'ServerResponse',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 619,
           columnNumber: 25 },
         { functionName: 'flush',
           isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 828,
           columnNumber: 9 },
         { functionName: '__send',
           typeName: 'ServerResponse',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 500,
           columnNumber: 16 },
         { functionName: 'send',
           typeName: 'ServerResponse',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/node_modules/restify/lib/response.js',
           lineNumber: 303,
           columnNumber: 28 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 55,
           columnNumber: 9 },
         { isToplevel: true,
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 45,
           columnNumber: 7 },
         { typeName: 'Timeout',
           fileName: '/Users/Andreas/Sites/clinic/node_modules/@nearform/clinic-bubbleprof/test/servers/bug.js',
           lineNumber: 34,
           columnNumber: 5 },
         { functionName: 'ontimeout',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 458,
           columnNumber: 11 },
         { functionName: 'tryOnTimeout',
           isToplevel: true,
           fileName: 'timers.js',
           lineNumber: 307,
           columnNumber: 5 },
         { functionName: 'listOnTimeout',
           typeName: 'Timer',
           fileName: 'timers.js',
           lineNumber: 270,
           columnNumber: 5 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 27,
      parentAggregateId: 22,
      children: [ 31, 32, 33 ],
      mark: [ 'nodecore', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'resume',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 819,
           columnNumber: 13 },
         { functionName: 'Readable.resume',
           typeName: 'IncomingMessage',
           fileName: '_stream_readable.js',
           lineNumber: 811,
           columnNumber: 5 },
         { functionName: '_dump',
           typeName: 'IncomingMessage',
           fileName: '_http_incoming.js',
           lineNumber: 319,
           columnNumber: 10 },
         { functionName: 'resOnFinish',
           isToplevel: true,
           fileName: '_http_server.js',
           lineNumber: 543,
           columnNumber: 9 },
         { functionName: 'emit',
           typeName: 'ServerResponse',
           fileName: 'events.js',
           lineNumber: 131,
           columnNumber: 13 },
         { functionName: 'emit',
           typeName: 'ServerResponse',
           fileName: 'domain.js',
           lineNumber: 421,
           columnNumber: 20 },
         { functionName: 'onFinish',
           isToplevel: true,
           fileName: '_http_outgoing.js',
           lineNumber: 726,
           columnNumber: 10 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 89,
           columnNumber: 11 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 31,
      parentAggregateId: 27,
      children: [],
      mark: [ 'nodecore', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'endReadable',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 1096,
           columnNumber: 13 },
         { functionName: 'Readable.read',
           typeName: 'IncomingMessage',
           fileName: '_stream_readable.js',
           lineNumber: 391,
           columnNumber: 7 },
         { functionName: 'read',
           typeName: 'IncomingMessage',
           fileName: '_http_incoming.js',
           lineNumber: 96,
           columnNumber: 15 },
         { functionName: 'resume_',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 826,
           columnNumber: 12 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 91,
           columnNumber: 19 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 32,
      parentAggregateId: 27,
      children: [],
      mark: [ 'nodecore', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'endReadable',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 1096,
           columnNumber: 13 },
         { functionName: 'Readable.read',
           typeName: 'IncomingMessage',
           fileName: '_stream_readable.js',
           lineNumber: 391,
           columnNumber: 7 },
         { functionName: 'flow',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 850,
           columnNumber: 34 },
         { functionName: 'resume_',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 832,
           columnNumber: 3 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 91,
           columnNumber: 19 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 33,
      parentAggregateId: 27,
      children: [],
      mark: [ 'nodecore', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'endReadable',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 1096,
           columnNumber: 13 },
         { functionName: 'Readable.read',
           typeName: 'IncomingMessage',
           fileName: '_stream_readable.js',
           lineNumber: 391,
           columnNumber: 7 },
         { functionName: 'resume_',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 834,
           columnNumber: 12 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 91,
           columnNumber: 19 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 28,
      parentAggregateId: 23,
      children: [ 34, 35 ],
      mark: [ 'nodecore', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'onwrite',
           isToplevel: true,
           fileName: '_stream_writable.js',
           lineNumber: 453,
           columnNumber: 15 },
         { functionName: 'Socket._writeGeneric',
           typeName: 'Socket',
           fileName: 'net.js',
           lineNumber: 803,
           columnNumber: 5 },
         { functionName: 'Socket._write',
           typeName: 'Socket',
           fileName: 'net.js',
           lineNumber: 818,
           columnNumber: 8 },
         { functionName: 'doWrite',
           isToplevel: true,
           fileName: '_stream_writable.js',
           lineNumber: 397,
           columnNumber: 12 },
         { functionName: 'clearBuffer',
           isToplevel: true,
           fileName: '_stream_writable.js',
           lineNumber: 524,
           columnNumber: 7 },
         { functionName: 'Writable.uncork',
           typeName: 'Socket',
           fileName: '_stream_writable.js',
           lineNumber: 303,
           columnNumber: 7 },
         { functionName: 'connectionCorkNT',
           isToplevel: true,
           fileName: '_http_outgoing.js',
           lineNumber: 688,
           columnNumber: 8 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 91,
           columnNumber: 19 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 34,
      parentAggregateId: 28,
      children: [],
      mark: [ 'nodecore', null, null ],
      type: 'SHUTDOWNWRAP',
      frames:
       [ { functionName: 'shutdownSocket',
           isToplevel: true,
           fileName: 'net.js',
           lineNumber: 305,
           columnNumber: 23 },
         { functionName: 'onSocketFinish',
           typeName: 'Socket',
           fileName: 'net.js',
           lineNumber: 329,
           columnNumber: 13 },
         { functionName: 'emit',
           typeName: 'Socket',
           fileName: 'events.js',
           lineNumber: 136,
           columnNumber: 15 },
         { functionName: 'emit',
           typeName: 'Socket',
           fileName: 'domain.js',
           lineNumber: 421,
           columnNumber: 20 },
         { functionName: 'finishMaybe',
           isToplevel: true,
           fileName: '_stream_writable.js',
           lineNumber: 623,
           columnNumber: 14 },
         { functionName: 'afterWrite',
           isToplevel: true,
           fileName: '_stream_writable.js',
           lineNumber: 465,
           columnNumber: 3 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 91,
           columnNumber: 19 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 35,
      parentAggregateId: 28,
      children: [],
      mark: [ 'nodecore', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'internalNextTick',
           isToplevel: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 171,
           columnNumber: 24 },
         { functionName: 'Server._emitCloseIfDrained',
           typeName: 'Server',
           fileName: 'net.js',
           lineNumber: 1707,
           columnNumber: 3 },
         { functionName: 'Socket._destroy',
           typeName: 'Socket',
           fileName: 'net.js',
           lineNumber: 608,
           columnNumber: 20 },
         { functionName: 'destroy',
           typeName: 'Socket',
           fileName: 'internal/streams/destroy.js',
           lineNumber: 32,
           columnNumber: 8 },
         { functionName: 'onceWrapper',
           typeName: 'Object',
           fileName: 'events.js',
           lineNumber: 223,
           columnNumber: 13 },
         { functionName: 'emit',
           typeName: 'Socket',
           fileName: 'events.js',
           lineNumber: 136,
           columnNumber: 15 },
         { functionName: 'emit',
           typeName: 'Socket',
           fileName: 'domain.js',
           lineNumber: 421,
           columnNumber: 20 },
         { functionName: 'finishMaybe',
           isToplevel: true,
           fileName: '_stream_writable.js',
           lineNumber: 623,
           columnNumber: 14 },
         { functionName: 'afterWrite',
           isToplevel: true,
           fileName: '_stream_writable.js',
           lineNumber: 465,
           columnNumber: 3 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 91,
           columnNumber: 19 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 29,
      parentAggregateId: 24,
      children: [ 36, 37, 38 ],
      mark: [ 'nodecore', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'resume',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 819,
           columnNumber: 13 },
         { functionName: 'Readable.resume',
           typeName: 'IncomingMessage',
           fileName: '_stream_readable.js',
           lineNumber: 811,
           columnNumber: 5 },
         { functionName: '_dump',
           typeName: 'IncomingMessage',
           fileName: '_http_incoming.js',
           lineNumber: 319,
           columnNumber: 10 },
         { functionName: 'resOnFinish',
           isToplevel: true,
           fileName: '_http_server.js',
           lineNumber: 543,
           columnNumber: 9 },
         { functionName: 'emit',
           typeName: 'ServerResponse',
           fileName: 'events.js',
           lineNumber: 131,
           columnNumber: 13 },
         { functionName: 'emit',
           typeName: 'ServerResponse',
           fileName: 'domain.js',
           lineNumber: 421,
           columnNumber: 20 },
         { functionName: 'onFinish',
           isToplevel: true,
           fileName: '_http_outgoing.js',
           lineNumber: 726,
           columnNumber: 10 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 89,
           columnNumber: 11 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 36,
      parentAggregateId: 29,
      children: [],
      mark: [ 'nodecore', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'endReadable',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 1096,
           columnNumber: 13 },
         { functionName: 'Readable.read',
           typeName: 'IncomingMessage',
           fileName: '_stream_readable.js',
           lineNumber: 391,
           columnNumber: 7 },
         { functionName: 'read',
           typeName: 'IncomingMessage',
           fileName: '_http_incoming.js',
           lineNumber: 96,
           columnNumber: 15 },
         { functionName: 'resume_',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 826,
           columnNumber: 12 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 91,
           columnNumber: 19 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 37,
      parentAggregateId: 29,
      children: [],
      mark: [ 'nodecore', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'endReadable',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 1096,
           columnNumber: 13 },
         { functionName: 'Readable.read',
           typeName: 'IncomingMessage',
           fileName: '_stream_readable.js',
           lineNumber: 391,
           columnNumber: 7 },
         { functionName: 'flow',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 850,
           columnNumber: 34 },
         { functionName: 'resume_',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 832,
           columnNumber: 3 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 91,
           columnNumber: 19 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 38,
      parentAggregateId: 29,
      children: [],
      mark: [ 'nodecore', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'endReadable',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 1096,
           columnNumber: 13 },
         { functionName: 'Readable.read',
           typeName: 'IncomingMessage',
           fileName: '_stream_readable.js',
           lineNumber: 391,
           columnNumber: 7 },
         { functionName: 'resume_',
           isToplevel: true,
           fileName: '_stream_readable.js',
           lineNumber: 834,
           columnNumber: 12 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 91,
           columnNumber: 19 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 30,
      parentAggregateId: 25,
      children: [ 39 ],
      mark: [ 'nodecore', null, null ],
      type: 'TickObject',
      frames:
       [ { functionName: 'TickObject',
           isConstructor: true,
           fileName: 'internal/process/next_tick.js',
           lineNumber: 113,
           columnNumber: 9 },
         { functionName: 'nextTick',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 142,
           columnNumber: 24 },
         { functionName: 'onwrite',
           isToplevel: true,
           fileName: '_stream_writable.js',
           lineNumber: 453,
           columnNumber: 15 },
         { functionName: 'Socket._writeGeneric',
           typeName: 'Socket',
           fileName: 'net.js',
           lineNumber: 803,
           columnNumber: 5 },
         { functionName: 'Socket._write',
           typeName: 'Socket',
           fileName: 'net.js',
           lineNumber: 818,
           columnNumber: 8 },
         { functionName: 'doWrite',
           isToplevel: true,
           fileName: '_stream_writable.js',
           lineNumber: 397,
           columnNumber: 12 },
         { functionName: 'clearBuffer',
           isToplevel: true,
           fileName: '_stream_writable.js',
           lineNumber: 524,
           columnNumber: 7 },
         { functionName: 'Writable.uncork',
           typeName: 'Socket',
           fileName: '_stream_writable.js',
           lineNumber: 303,
           columnNumber: 7 },
         { functionName: 'connectionCorkNT',
           isToplevel: true,
           fileName: '_http_outgoing.js',
           lineNumber: 688,
           columnNumber: 8 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 91,
           columnNumber: 19 } ]
    }),

    new FakeAggregateNode({
      aggregateId: 39,
      parentAggregateId: 30,
      children: [],
      mark: [ 'nodecore', null, null ],
      type: 'SHUTDOWNWRAP',
      frames:
       [ { functionName: 'shutdownSocket',
           isToplevel: true,
           fileName: 'net.js',
           lineNumber: 305,
           columnNumber: 23 },
         { functionName: 'onSocketFinish',
           typeName: 'Socket',
           fileName: 'net.js',
           lineNumber: 329,
           columnNumber: 13 },
         { functionName: 'emit',
           typeName: 'Socket',
           fileName: 'events.js',
           lineNumber: 136,
           columnNumber: 15 },
         { functionName: 'emit',
           typeName: 'Socket',
           fileName: 'domain.js',
           lineNumber: 421,
           columnNumber: 20 },
         { functionName: 'finishMaybe',
           isToplevel: true,
           fileName: '_stream_writable.js',
           lineNumber: 623,
           columnNumber: 14 },
         { functionName: 'afterWrite',
           isToplevel: true,
           fileName: '_stream_writable.js',
           lineNumber: 465,
           columnNumber: 3 },
         { functionName: '_tickCallback',
           typeName: 'process',
           fileName: 'internal/process/next_tick.js',
           lineNumber: 91,
           columnNumber: 19 } ]
    })
  ]

  return startpoint(data.sort((a, b) => a.aggregateId - b.aggregateId), { objectMode: true })
}

const systemInfo = new FakeSystemInfo(path.resolve(__dirname, 'servers'))

createTreeStructure()
  .pipe(new WrapAsBarrierNodes())
  .pipe(new MakeSynchronousBarrierNodes(systemInfo))
  .pipe(new MakeExternalBarrierNodes(systemInfo))
  .pipe(new CombineAsClusterNodes())
  .pipe(inspectpoint({ depth: null, colors: true }))
  .pipe(process.stdout)
